--- linux-2.6.18.orig/init/do_mounts.c	2006-09-20 05:42:06.000000000 +0200
+++ linux-2.6.18/init/do_mounts.c	2006-09-30 13:08:56.000000000 +0200
@@ -304,11 +304,24 @@
 		 * and bad superblock on root device.
 		 */
 		__bdevname(ROOT_DEV, b);
-		printk("VFS: Cannot open root device \"%s\" or %s\n",
+		printk("VFS: Cannot open root device \"%s\" or %s, retrying in 1 second.\n",
 				root_device_name, b);
-		printk("Please append a correct \"root=\" boot option\n");
+		printk("You may need to append a correct \"root=\" boot option\n");
+		printk("or wait for the root device to become ready.\n");
 
-		panic("VFS: Unable to mount root fs on %s", b);
+		/* wait 1 second and try again,
+		 * allowing time for hubs/devices to become ready */
+		set_current_state(TASK_INTERRUPTIBLE);
+		schedule_timeout(HZ);
+
+		/* re-calculate the ROOT_DEV here, possibly after some
+		 * device has been initialized */
+		if (saved_root_name[0]) {
+			ROOT_DEV = name_to_dev_t(saved_root_name);
+			create_dev("/dev/root", ROOT_DEV);
+		}
+
+		goto retry;
 	}
 
 	printk("No filesystem could mount root, tried: ");
